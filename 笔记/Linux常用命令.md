# Linux常用命令

## 常用命令

1  Linux文件系统的设计理念：一切皆文件**

```
date  +"%Y%m%d" -d  "+1 days"         今天的后n天日期  
date  "+%Y-%m-%d" -d  "-1 days"         今天的前n天日期
echo `date -d "1 days ago" "+%Y-%m-%d"`  打印一天前日期
```

2 相对路径中的  **./ 表示当前目录     ..表示上一级目录**

```java
1  pwd:显示当前所在的工作目录
   su 用户名： 切换用户
   echo ：打印输出
    . : 隐藏文件
cd .. : 返回当前目录的上一级目录
    / : Linux系统根目录
   ./ : 用户所在的当前目录
  ../ : 用户所在 目录的父目录
    > : 清空文件内容，再添加
  > > :  向文件里追加内容，不清空文件
    | : 表示管道，上一条命令的输出，作为下一条命令参数(输入)
   || : 表示上一条命令执行失败后，才执行下一条命令
	
2  ls[空格 -参数] 目录（文件） :查看文件与目录（目录前面加/）
 参数选项:
 	ll:ls-l的缩写 显示文件详细信息(不包括隐藏文件和文件夹)
 	ls-la:显示文件详细信息包括隐藏文件
    ls-a:列出目录下所有文件包括隐藏文件
    ls-A:列出除.和..的其他文件
    -l:显示文件详细信息
    -h:人类可读方式显示长度
    -r:反序排列
    -R:递归显示
    -t:以文件修改时间排序
    -S:以文件大小排序d
    -d:查看当前目录的属性
    
3 cd 目录: 切换目录
  cd 路径 --> 例如 cd /home --> 这个命令和 windows是通用
  cd ~ ：表示回到当前用户的home目录即用户主目录
  cd - ：返回进入此目录之前所在目录
  cd .. ：表示返回到上一级目录
  cd  / ：回到 根目录下 最顶层
  cd 文件夹（当前路径）：进入文件夹 

------------------------------------------------------------
帮助命令：
1 man（info） 命令名称 ：获取命令的帮助信息
e.g ：      man ls :查看ls命令的帮助信息
		  info ls:查看ls命令的帮助信息
```

## 积累

```shell
#查看端口是否被占用
netstat -anp | grep 6666（端口号）

```

## 文件处理命令

```
1 mkdir(touch) 目录名 ：创建目录(可以创建多个）

2 cp[-r] 源文件（目录） 目标文件（目录） ：复制文件（目录）
   -r ：递归复制文件（目录）
   scp :超级复制，可虚拟机复制
 
3 mv 源文件（目录） 目标文件（目录）: 移动文件（目录),也可实现改名

4 rm[-rf] 文件（目录）：删除文件（目录）
    -r: 递归； -f：强制
 
5 ln[-s] 源文件 连接文件名： 创建连接文件（快捷方式）
	-s:软链接  可以对目录或者文件设置
	不写参数：硬链接 ，只能对文件进行设置
```

## 文件查看命令

```
1 cat 文件名/目录 :查看文件内容

2 more 文件名 : 分页显示文件内容		
  快捷键： 空格键或f :显示下一页
          enter :	 显示下一行
           q或Q :	退出 
      
3 head [-n] 文件名 ：查看文件的前n行（默认为10）
  tail[-n] 文件名 ： 查看文件的末尾n行（默认为10）
  tail -f filename ：会把 filename 文件里的最尾部的内容显示在屏幕上，并且不断刷新，只要 filename 更新就可以看到最新的文件内容
 	-f 循环读取 
	-q 不显示处理信息 
	-v 显示详细的处理信息 
	-c<数目> 显示的字节数 
	-n<行数> 显示文件的尾部 n 行内容 
	--pid=PID 与-f合用,表示在进程ID,PID死掉之后结束 
	-q, --quiet, --silent 从不输出给出文件名的首部 
	-s, --sleep-interval=S 与-f合用,表示在每次反复的间隔休眠S秒 
  
```

## 查找命令

```
1 which 命令名称 :查找命令所在位置,可以查看命令是否存在以及执行的是哪                                                一个位置的命令
2 whereis 命令名称 ：查找命令的二进制文件以及帮助文件

3 locat 关键字 ：显示所有带关键字的文件和文件夹（在数据库内部查找，找不到刚刚创建的文件或目录）
  Updatedb :更新数据库（将没有保存的数据保存进数据库）
  
4 find[路径][选项][行为] :按照指定方式查找文件（普通用户root都可用）
   4.1 在目录/etc下，查找文件名为init的文件或目录
   find /etc -name init
	
   4.2 在目录/etc/ssh下，查找root用户所拥有的文件或目录
   find /etc/ssh -user root

   4.3 在根目录下查找大于100M的文件：在linux系统中，默认是以512个字节    为一个块大小。find命令使用块的个数进行查找。
    find	/ -size +204800
 
   4.4在根目录下查找所有者为sam的文件
   find / -user	sam

   4.5 在/etc下查找24小时内被修改过属性的文件或目录
   find	/etc  -ctime	-1

   4.6 在/etc下查找大于—小于--的文件
   find  /etc  -size   +30M    -a    -size  -230M

   4.7 在当前目录下，查找所有目录，并执行强制删除（注意：别删除根目录      下的目录）
   find ./ -type d -exec rm -rf {} \;
   {} :表示前面的行为的结果集；有行为的时候要有 \(转义符号)，带分号
   -exec :代表执行操作
   
   4.8 在当前目录下，查找名称为services的文件，并查看内容
   find ./ -name services  -exec cat {} \;

   4.9 在/etc下查找inittab文件并显示详细信息
   find /etc -name inittab -exec ls  -l {} \;
 
5 grep [选项] [关键字条件] [目标文件] :过滤指定文件中符号条件的文件
	grep -n ftp /etc/services
	grep -ic FTP /etc/services
       -i 忽略大小写
	   -n 输出行号
	   -v 反向选择
	   -c 表示符合条件的行数
```

## 压缩（打包）和解压缩（解包）命令

```
 1  gzip [选项] 文件路径（可以有多个文件）：压缩
    gunzip [选项] 文件路径 :解压
	-v  ：可以显示压缩比，文件名等信息
	-#  ：#为数字，代表压缩等级        
	-d  ：解压缩参数

2 bzip2(bunzip2)[选项] 文件路径（可以有多个文件）：
  压缩 默认不保留源文件； 压缩格式: .bz2
	-v  ：可以显示压缩比，文件名等信息
	-#  ：#为数字，代表压缩等级         
	-d  ：解压缩参数
	-k  : 压缩后，保留源文件

3 tar  : linux上最常用的文件压缩方式  
     -c : 打包或压缩
     -x : 解包或解压
     -t : 查看打包文件内容
     -f : 强制
     -v : 输出信息
     -C(大写) 路径 : 解压到指定目录 
     -z  ： 通过gzip指令压缩或解压缩，后缀.tar.gz。
     -j  ： 通过bzip2压缩或解压缩，后缀.tar.bz2。
     -J  ： 通过xz指令压缩或解压缩，后缀.tar.xz。
     
 3.1 压缩（打包）:
       tar -cvf 文件存在路径  ---- 可以是N个文件
 3.2 解压（解包）:
   tar -xvf 压缩包路径 解压到的当前路径
   tar -xvf 压缩包路径 -C 需要将包解压到什么位置
 3.3 tar结合gz高强度压缩：    
    压缩:
        tar -zcvf 压缩包所在路径.tar.gz  （可以是N个文件或文件夹）     解压:
        tar -zxvf 压缩包路径 解压到当前路径
        tar -zxvf 压缩包路径 -C 解压到的路径
```

## 系统服务管理命令

```
系统服务管理命令
 1  service --status-all:查看系统所有后台服务
 2 chkconfig :启动管理，控制开启和停止
   chkconfig  进程名称 on/off :设置开机启动或不启动
   chkconfig  进程名称 --list :查看某个进程的启动状态
   service 进程名  status :查看某个进程的状态
-----------------------------------------------------------
系统关机重启命令
1  shutdown： 关机
        权限：root
        shutdown -h now 立即关机
        shutdown -h +10 10分钟后关机
        shutdown -h 12:00 12:00关机
 2  reboot 重启
```

## 系统时间命令

```
date 查看修改时间
 1  date "+%Y-%m-%d %H:%M:%S"  ： 更改输出样式
 2  date -s "2019-08-05 11:25:00"  ：设置时间
 3  date -d "10 days ago"    ： 获取10天前的时间
```

## 系统磁盘占用查看

```
df : 检查磁盘占用情况
    -a：--all，全部文件系统列表
    -h：人类可阅读的方式显示
    -k：区块为1024字节
    -m：区块为1048576字节
    -l：只显示本地文件系统
    -T：文件系统类型
```

## 防火墙命令

```
防火墙命令
1 chkconfig iptables --list   查看防火墙状态
2 chkconfig iptables off      关闭开机自启动
3 chkconfig iptables on       设置开机自启动
4 service iptables start      开启防火墙
5 service iptables  stop	  临时关闭防火墙
6 service iptables status     查看防火墙运行状态
```

## 其他命令

```
1  hostname  查看主机名
2  hwclkock 将时间同步到bios中
3  clear  清屏
4  Ps   查看进程
    ps -ef/aux 查看所有进程
5  pstree 以树状的形式显示所有进程之间的关系
6  kill: 杀死进程
7  ping 网络ID : 向网络发送请求检测连接
8  ifconfig : 查看网卡信息
9  set nu :vi插入模式让内容显示行号
```

## VI编译

```
vi 文件名（路径） ： 进入命令模式
i/I/a/A/o/O : 命令模式 --->插入模式（就是编辑模式）
esc : 插入模式/底行命令模式------>  命令模式 
:/? : 命令模式 ------> 底行命令模式
:q  : 从底行命令模式退出
:wq  : 保存修改内容退出
:q!   : 不保存修改内容强制退出

i : 光标所在处前开始输入
I : 光标所在行行首开始输入
o : 光标所在行的下一行开始输入
O : 光标所在行的上一行开始输入
a : 光标所在处后开始输入
A : 光标所在行行尾开始输入
------------------------------------------------------------
VI编译器常用命令：
d:命令模式下，将游标移到最后一行末尾
1,d :插入模式下删除整段内容
H：移动到当前屏幕的最上一行的行首  
M：移动到当前屏幕的中间一行的行首  
L： 移动到当前屏幕的最下一行的行首  
gg：移动到这个文件的第一行，相当于1G (常用)  
G：移动到这个文件的最后一行(常用)  
x, X：在一行字符中，x表示向后删除一个字符(相当于del键)，X为向前删除一个字符(相当于退格键) (常用)  
nx：n为数字，连续向后删除n个字符。  
dd：刪除游标所在的那一行(常用,也是剪切)  
ndd：n为数字。删除游标所在的向下n行(常用)  
d1G:刪除游标所在到第一行的所有行数据  
dG:刪除游标所在到最后一行的所有行数据 
yy，Y:复制游标所在的那一行数据(常用)  
nyy，nY:n 为数字。复制游标所在的向下n行(常用)  
p, P:p表示将复制的数据粘贴到游标所在行的下一行，P表示将复制的数据粘贴到游标所在行的上一行 (常用)  
u:撤销前一个动作。(常用)
```

## 用户常用命令

```
1 添加用户
   useradd [选项] [用户名]（此选项 12通用）
   	 -c  指定一段注释性描述。
     -d  指定用户主目录，目录不存在，则同时使用-m，可以创建主目录。
     -g  指定用户所属的用户组（指定用户组必须存在否则创建失败）
     -G  指定用户所属的附加组。
     -s Shell文件 指定用户的登录Shell。
     -u 用户ID号 指定用户的UID
2 修改用户名
      usermod 新用户名 原名
      
  2.1:修改用户名名修改主目录（已经配置好的配置不会随之改变）
      usermod -l newname -d /home/newname oldname
3 修改用户密码
	passwd [选项]  [用户名]
	  -l 锁定口令，即禁用账号。
      -u 口令解锁。
      -d 使账号无口令。
      -f 强迫用户下次登录时修改口令。
4 删除用户
	userdel  用户名  ：删除用户
	userdel -r 用户名 ：home目录下的文件也会被删除
```

## 用户组常用命令

```
1 创建用户组
	groupadd  [选项]  [用户组]
	   -g  ： 指定新用户组的组标识号（gid）。
       -o ： 一般与-g选项同时使用，表示新用户组的gid可以与系统已有用                                               户组的gid相同。
2 修改用户组
   groupmod  [选项]  [用户组]
     -g ： 为用户组指定新的组标识号。
     -o ：与-g选项同时使用，用户组的新gid可以与系统已有用户组gid同。
     -n ： 将用户组的名字改为新名字
3 删除用户组
	groupdel  [用户组] 
-----------------------------------------------------------
   groupadd 组名 ：创建组不会创建用户
   gpasswd -a 用户名 组名  ：将用户加到组中（附加组）
   gpasswd -d 用户名 组名 : 将用户从组中删除（附加组）
   groups 用户名 ：查看当前用户所在组
```

## 权限修改命令

```
r: 可读权限，4；     w:可写权限，2；   x:可执行权限，1
u:用户，所有者；  g:用户组    o:其他用户  a:all 所有
1 修改用户对文件的权限：ower和root可以操作
      chmod [ugoa][+-=][rwx]  文件名
  1.1： 修改文件的所属用户和用户组
      chmod 用户：用户组 文件名

2 修改ower : root可以操作
   chown[-R] newower 文件名

3 修改用户组: root 可以操作
	chgrp [-R] newgroup 文件名
```

## rpm命令

```
  rpm -qa :查询系统已经安装的程序
  rpm -aq | grep 要查询的程序名称  ：过滤出要查询的软件
  rpm -e 软件名 --nodeps 软件名称 ： 软件的强制删除
 ----------------------------------------------------------
2 rpm [-ivh] 软件名
    -i:安装的含义
    -v:安装过程显示详情
    -h:以进度条形式显示安装
    
  -qi ：软件的详细信息 ，如版本号，发行时间，安装时间等
  -ql ：程序所有的文档与目录
  -qR ：列出与该程序有关的依赖软件所含的文件 (Required 的意思) 
  -U： 更新
  rpm -Uvh 软件名称 ：更新软件
  -e ：删除
  --nodeps ：不检查软件之间的依赖关系
```

## yum命令

```
1 没有更改的 yum源的位置：/etc/yum.repos.d/

2 列出yum库里所有软件包：yum list 
  2.1 列出所有已经安装的安装包 ： yum list installed
  2.2 列出没有安装的安装包 ： yum list available
  
3 查看软件信息： yum info 软件名
4 根据关键字查找安装包： yum search 关键字

5 安装软件： yum install -y 软件（-y表示yes）
6 重新安装软件 ：yum reinstall 软件名
7 更新 ：yum -y update 软件名
8 卸载： yum remove -y 软件名
```

## 定时器

```
1  crontab -e :开启定时任务
2  crontab -r :结束定时任务
3  crontab -l :查看定时任务是谁开启的
-----------------------------------------------------------
minute hour day month week command 顺序分别为 分 时 日 月 周 执行的命令
minute :0~59之间的任何整数
hour :  0~23之间的任意整数
day  :  1~31之间的任何整数 
month : 1~12之间的任何整数
week  :  0~6之间的任何整数
command ： 需要执行的命令
1 星号(*)代表任意值
     e.g 在hour字段使用* 代表每个小时都会执行操作
2 斜线(/) 斜线表示间隔频率
	 e.g  */2 每个两小时执行一次
	      */1 每一分钟执行一次
案例：1 开启任务：crontab -e 
     2 开启任务方式 ：每隔一分钟执行一下操作
      */1 * * * * echo "hello crontab" >> /root/test.log
     3 停止任务： crontab -r
```

